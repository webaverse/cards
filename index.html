<!doctype html>
<html>
<body>
  <div className="card-svg-inner"></div>
<script type=module>
(async () => {
const res = await fetch('/cards.svg');
const cardSvgSource = await res.text();

const cardWidth = 500;
const cardHeight = cardWidth/2.5*3.5;

const svg = document.createElement('svg');
svg.width = cardWidth;
svg.width = cardHeight;
svg.innerHTML = cardSvgSource;

{
  const el = svg;

  const titleTextEl = el.querySelector('#title-text');
  titleTextEl.innerHTML = assetName;
  for (let i = 0; i < types.length; i++) {
    const type = types[i];
    const typeEl = el.querySelector('#type-' + type);
    typeEl.style.display = type === spec.stats.type ? 'block' : 'none';
  }
  [
    'hp',
    'mp',
    'attack',
    'defense',
    'speed',
    'luck',
  ].forEach(statName => {
    const statEl = el.querySelector('#' + statName);
    const texts = statEl.querySelectorAll('text');
    const textEl = texts[texts.length - 1];
    textEl.innerHTML = spec.stats[statName] + '';
  });
  {
    const imageEl = el.querySelector('#Image image');
    imageEl.setAttribute('xlink:href', image);
  }
  {
    const avatarImageEl = el.querySelector('#avatar-image image');
    avatarImageEl.setAttribute('xlink:href', minterAvatarPreview);
  }
  {
    const stopEls = el.querySelectorAll('#Background linearGradient > stop');
    // const c = `stop-color:${spec.art.colors[0]}`;
    stopEls[1].style.cssText = `stop-color:${spec.art.colors[0]}`;
    stopEls[3].style.cssText = `stop-color:${spec.art.colors[1]}`;
    
    const g = el.querySelector('#Background linearGradient');
    g.id = 'background-' + id;
    const p = g.nextElementSibling;
    p.style = `fill:url(#${g.id});`;
  }
}
})();
</script>
</body>
</html>